AmCharts.AmSerialChart=AmCharts.Class({inherits:AmCharts.AmRectangularChart,construct:function(t){this.type="serial",AmCharts.AmSerialChart.base.construct.call(this,t),this.cname="AmSerialChart",this.theme=t,this.createEvents("changed"),this.columnSpacing=5,this.columnSpacing3D=0,this.columnWidth=.8,this.updateScrollbar=!0;var e=new AmCharts.CategoryAxis(t);e.chart=this,this.categoryAxis=e,this.zoomOutOnDataUpdate=!0,this.mouseWheelZoomEnabled=this.mouseWheelScrollEnabled=this.rotate=this.skipZoom=!1,this.minSelectedTime=0,AmCharts.applyTheme(this,t,this.cname)},initChart:function(){AmCharts.AmSerialChart.base.initChart.call(this),this.updateCategoryAxis(this.categoryAxis,this.rotate,"categoryAxis"),this.dataChanged&&(this.updateData(),this.dataChanged=!1,this.dispatchDataUpdated=!0);var t=this.chartCursor;t&&(t.updateData(),t.fullWidth&&(t.fullRectSet=this.cursorLineSet));var e,t=this.countColumns(),i=this.graphs;for(e=0;e<i.length;e++)i[e].columnCount=t;this.updateScrollbar=!0,this.drawChart(),this.autoMargins&&!this.marginsUpdated&&(this.marginsUpdated=!0,this.measureMargins()),(this.mouseWheelScrollEnabled||this.mouseWheelZoomEnabled)&&this.addMouseWheel()},handleWheelReal:function(t,e){if(!this.wheelBusy){var i=this.categoryAxis,s=i.parseDates,a=i.minDuration(),h=i=1;this.mouseWheelZoomEnabled?e||(i=-1):e&&(i=-1);var r=this.chartData.length,o=this.lastTime,n=this.firstTime;0>t?s?(r=this.endTime-this.startTime,s=this.startTime+i*a,a=this.endTime+h*a,h>0&&i>0&&a>=o&&(a=o,s=o-r),this.zoomToDates(new Date(s),new Date(a))):(h>0&&i>0&&this.end>=r-1&&(i=h=0),s=this.start+i,a=this.end+h,this.zoomToIndexes(s,a)):s?(r=this.endTime-this.startTime,s=this.startTime-i*a,a=this.endTime-h*a,h>0&&i>0&&n>=s&&(s=n,a=n+r),this.zoomToDates(new Date(s),new Date(a))):(h>0&&i>0&&1>this.start&&(i=h=0),s=this.start-i,a=this.end-h,this.zoomToIndexes(s,a))}},validateData:function(t){this.marginsUpdated=!1,this.zoomOutOnDataUpdate&&!t&&(this.endTime=this.end=this.startTime=this.start=NaN),AmCharts.AmSerialChart.base.validateData.call(this)},drawChart:function(){AmCharts.AmSerialChart.base.drawChart.call(this);var t=this.chartData;if(AmCharts.ifArray(t)){var e=this.chartScrollbar;if(e&&e.draw(),0<this.realWidth&&0<this.realHeight){var i,t=t.length-1,e=this.categoryAxis;e.parseDates&&!e.equalSpacing?(e=this.startTime,i=this.endTime,(isNaN(e)||isNaN(i))&&(e=this.firstTime,i=this.lastTime)):(e=this.start,i=this.end,(isNaN(e)||isNaN(i))&&(e=0,i=t)),this.endTime=this.startTime=this.end=this.start=void 0,this.zoom(e,i)}}else this.cleanChart();this.dispDUpd(),this.chartCreated=!0},cleanChart:function(){AmCharts.callMethod("destroy",[this.valueAxes,this.graphs,this.categoryAxis,this.chartScrollbar,this.chartCursor])},updateCategoryAxis:function(t,e,i){t.chart=this,t.id=i,t.rotate=e,t.axisRenderer=AmCharts.RecAxis,t.guideFillRenderer=AmCharts.RecFill,t.axisItemRenderer=AmCharts.RecItem,t.setOrientation(!this.rotate),t.x=this.marginLeftReal,t.y=this.marginTopReal,t.dx=this.dx,t.dy=this.dy,t.width=this.plotAreaWidth-1,t.height=this.plotAreaHeight-1,t.viW=this.plotAreaWidth-1,t.viH=this.plotAreaHeight-1,t.viX=this.marginLeftReal,t.viY=this.marginTopReal,t.marginsChanged=!0},updateValueAxes:function(){AmCharts.AmSerialChart.base.updateValueAxes.call(this);var t,e=this.valueAxes;for(t=0;t<e.length;t++){var i=e[t],s=this.rotate;i.rotate=s,i.setOrientation(s),s=this.categoryAxis,(!s.startOnAxis||s.parseDates)&&(i.expandMinMax=!0)}},updateData:function(){this.parseData();var t,e=this.graphs,i=this.chartData;for(t=0;t<e.length;t++)e[t].data=i;0<i.length&&(this.firstTime=this.getStartTime(i[0].time),this.lastTime=this.getEndTime(i[i.length-1].time))},getStartTime:function(t){var e=this.categoryAxis;return AmCharts.resetDateToMin(new Date(t),e.minPeriod,1,e.firstDayOfWeek).getTime()},getEndTime:function(t){var e=AmCharts.extractPeriod(this.categoryAxis.minPeriod);return AmCharts.changeDate(new Date(t),e.period,e.count,!0).getTime()-1},updateMargins:function(){AmCharts.AmSerialChart.base.updateMargins.call(this);var t=this.chartScrollbar;t&&(this.getScrollbarPosition(t,this.rotate,this.categoryAxis.position),this.adjustMargins(t,this.rotate))},updateScrollbars:function(){AmCharts.AmSerialChart.base.updateScrollbars.call(this),this.updateChartScrollbar(this.chartScrollbar,this.rotate)},zoom:function(t,e){var i=this.categoryAxis;i.parseDates&&!i.equalSpacing?this.timeZoom(t,e):this.indexZoom(t,e),this.updateLegendValues()},timeZoom:function(t,e){var i=this.maxSelectedTime;isNaN(i)||(e!=this.endTime&&e-t>i&&(t=e-i,this.updateScrollbar=!0),t!=this.startTime&&e-t>i&&(e=t+i,this.updateScrollbar=!0));var s=this.minSelectedTime;if(s>0&&s>e-t){var a=Math.round(t+(e-t)/2),s=Math.round(s/2);t=a-s,e=a+s}var h=this.chartData,a=this.categoryAxis;if(AmCharts.ifArray(h)&&(t!=this.startTime||e!=this.endTime)){var r=a.minDuration(),s=this.firstTime,o=this.lastTime;t||(t=s,isNaN(i)||(t=o-i)),e||(e=o),t>o&&(t=o),s>e&&(e=s),s>t&&(t=s),e>o&&(e=o),t>e&&(e=t+r),r/5>e-t&&(o>e?e=t+r/5:t=e-r/5),this.startTime=t,this.endTime=e,i=h.length-1,r=this.getClosestIndex(h,"time",t,!0,0,i),h=this.getClosestIndex(h,"time",e,!1,r,i),a.timeZoom(t,e),a.zoom(r,h),this.start=AmCharts.fitToBounds(r,0,i),this.end=AmCharts.fitToBounds(h,0,i),this.zoomAxesAndGraphs(),this.zoomScrollbar(),t!=s||e!=o?this.showZB(!0):this.showZB(!1),this.updateColumnsDepth(),this.dispatchTimeZoomEvent()}},indexZoom:function(t,e){var i=this.maxSelectedSeries;if(isNaN(i)||(e!=this.end&&e-t>i&&(t=e-i,this.updateScrollbar=!0),t!=this.start&&e-t>i&&(e=t+i,this.updateScrollbar=!0)),t!=this.start||e!=this.end){var s=this.chartData.length-1;isNaN(t)&&(t=0,isNaN(i)||(t=s-i)),isNaN(e)&&(e=s),t>e&&(e=t),e>s&&(e=s),t>s&&(t=s-1),0>t&&(t=0),this.start=t,this.end=e,this.categoryAxis.zoom(t,e),this.zoomAxesAndGraphs(),this.zoomScrollbar(),0!==t||e!=this.chartData.length-1?this.showZB(!0):this.showZB(!1),this.updateColumnsDepth(),this.dispatchIndexZoomEvent()}},updateGraphs:function(){AmCharts.AmSerialChart.base.updateGraphs.call(this);var t,e=this.graphs;for(t=0;t<e.length;t++){var i=e[t];i.columnWidthReal=this.columnWidth,i.categoryAxis=this.categoryAxis,AmCharts.isString(i.fillToGraph)&&(i.fillToGraph=this.getGraphById(i.fillToGraph))}},updateColumnsDepth:function(){var t,e,i=this.graphs;for(AmCharts.remove(this.columnsSet),this.columnsArray=[],t=0;t<i.length;t++){e=i[t];var s=e.columnsArray;if(s){var a;for(a=0;a<s.length;a++)this.columnsArray.push(s[a])}}if(this.columnsArray.sort(this.compareDepth),0<this.columnsArray.length){for(i=this.container.set(),this.columnSet.push(i),t=0;t<this.columnsArray.length;t++)i.push(this.columnsArray[t].column.set);e&&i.translate(e.x,e.y),this.columnsSet=i}},compareDepth:function(t,e){return t.depth>e.depth?1:-1},zoomScrollbar:function(){var t=this.chartScrollbar,e=this.categoryAxis;t&&this.updateScrollbar&&(e.parseDates&&!e.equalSpacing?t.timeZoom(this.startTime,this.endTime):t.zoom(this.start,this.end),this.updateScrollbar=!0)},updateTrendLines:function(){var t,e=this.trendLines;for(t=0;t<e.length;t++){var i=e[t],i=AmCharts.processObject(i,AmCharts.TrendLine,this.theme);e[t]=i,i.chart=this,AmCharts.isString(i.valueAxis)&&(i.valueAxis=this.getValueAxisById(i.valueAxis)),i.valueAxis||(i.valueAxis=this.valueAxes[0]),i.categoryAxis=this.categoryAxis}},zoomAxesAndGraphs:function(){if(!this.scrollbarOnly){var t,e=this.valueAxes;for(t=0;t<e.length;t++)e[t].zoom(this.start,this.end);for(e=this.graphs,t=0;t<e.length;t++)e[t].zoom(this.start,this.end);this.zoomTrendLines(),(t=this.chartCursor)&&t.zoom(this.start,this.end,this.startTime,this.endTime)}},countColumns:function(){var t,e,i,s,a=0,h=this.valueAxes.length,r=this.graphs.length,o=!1;for(s=0;h>s;s++){e=this.valueAxes[s];var n=e.stackType;if("100%"==n||"regular"==n)for(o=!1,i=0;r>i;i++)t=this.graphs[i],t.tcc=1,t.valueAxis==e&&"column"==t.type&&(!o&&t.stackable&&(a++,o=!0),(!t.stackable&&t.clustered||t.newStack)&&a++,t.columnIndex=a-1,t.clustered||(t.columnIndex=0));if("none"==n||"3d"==n){for(o=!1,i=0;r>i;i++)t=this.graphs[i],t.valueAxis==e&&"column"==t.type&&(t.clustered?(t.tcc=1,t.newStack&&(a=0),t.hidden||(t.columnIndex=a,a++)):t.hidden||(o=!0,t.tcc=1,t.columnIndex=0));o&&0==a&&(a=1)}if("3d"==n){for(e=1,s=0;r>s;s++)t=this.graphs[s],t.newStack&&e++,t.depthCount=e,t.tcc=a;a=e}}return a},parseData:function(){AmCharts.AmSerialChart.base.parseData.call(this),this.parseSerialData()},getCategoryIndexByValue:function(t){var e,i,s=this.chartData;for(i=0;i<s.length;i++)s[i].category==t&&(e=i);return e},handleCursorChange:function(t){this.updateLegendValues(t.index)},handleCursorZoom:function(t){this.updateScrollbar=!0,this.zoom(t.start,t.end)},handleScrollbarZoom:function(t){this.updateScrollbar=!1,this.zoom(t.start,t.end)},dispatchTimeZoomEvent:function(){if(this.prevStartTime!=this.startTime||this.prevEndTime!=this.endTime){var t={type:"zoomed"};t.startDate=new Date(this.startTime),t.endDate=new Date(this.endTime),t.startIndex=this.start,t.endIndex=this.end,this.startIndex=this.start,this.endIndex=this.end,this.startDate=t.startDate,this.endDate=t.endDate,this.prevStartTime=this.startTime,this.prevEndTime=this.endTime;var e=this.categoryAxis,i=AmCharts.extractPeriod(e.minPeriod).period,e=e.dateFormatsObject[i];t.startValue=AmCharts.formatDate(t.startDate,e,this),t.endValue=AmCharts.formatDate(t.endDate,e,this),t.chart=this,t.target=this,this.fire(t.type,t)}},dispatchIndexZoomEvent:function(){if(this.prevStartIndex!=this.start||this.prevEndIndex!=this.end){this.startIndex=this.start,this.endIndex=this.end;var t=this.chartData;if(AmCharts.ifArray(t)&&!isNaN(this.start)&&!isNaN(this.end)){var e={chart:this,target:this,type:"zoomed"};e.startIndex=this.start,e.endIndex=this.end,e.startValue=t[this.start].category,e.endValue=t[this.end].category,this.categoryAxis.parseDates&&(this.startTime=t[this.start].time,this.endTime=t[this.end].time,e.startDate=new Date(this.startTime),e.endDate=new Date(this.endTime)),this.prevStartIndex=this.start,this.prevEndIndex=this.end,this.fire(e.type,e)}}},updateLegendValues:function(t){var e,i=this.graphs;for(e=0;e<i.length;e++){var s=i[e];isNaN(t)?s.currentDataItem=void 0:s.currentDataItem=this.chartData[t].axes[s.valueAxis.id].graphs[s.id]}this.legend&&this.legend.updateValues()},getClosestIndex:function(t,e,i,s,a,h){0>a&&(a=0),h>t.length-1&&(h=t.length-1);var r=a+Math.round((h-a)/2),o=t[r][e];return 1>=h-a?s?a:(s=t[h][e],Math.abs(t[a][e]-i)<Math.abs(s-i)?a:h):i==o?r:o>i?this.getClosestIndex(t,e,i,s,a,r):this.getClosestIndex(t,e,i,s,r,h)},zoomToIndexes:function(t,e){this.updateScrollbar=!0;var i=this.chartData;if(i){var s=i.length;s>0&&(0>t&&(t=0),e>s-1&&(e=s-1),s=this.categoryAxis,s.parseDates&&!s.equalSpacing?this.zoom(i[t].time,this.getEndTime(i[e].time)):this.zoom(t,e))}},zoomToDates:function(t,e){this.updateScrollbar=!0;var i=this.chartData;if(this.categoryAxis.equalSpacing){var s=this.getClosestIndex(i,"time",t.getTime(),!0,0,i.length);e=AmCharts.resetDateToMin(e,this.categoryAxis.minPeriod,1),i=this.getClosestIndex(i,"time",e.getTime(),!1,0,i.length),this.zoom(s,i)}else this.zoom(t.getTime(),e.getTime())},zoomToCategoryValues:function(t,e){this.updateScrollbar=!0,this.zoom(this.getCategoryIndexByValue(t),this.getCategoryIndexByValue(e))},formatPeriodString:function(t,e){if(e){var i=["value","open","low","high","close"],s="value open low high close average sum count".split(" "),a=e.valueAxis,h=this.chartData,r=e.numberFormatter;r||(r=this.nf);for(var o=0;o<i.length;o++){for(var n,d,l,m,c,u,g,p,f,A,C=i[o],D=0,x=0,v=0,T=0,b=this.start;b<=this.end;b++){var M=h[b];if(M&&(M=M.axes[a.id].graphs[e.id])){if(M.values){var y=M.values[C];if(!isNaN(y)){isNaN(n)&&(n=y),d=y,(isNaN(l)||l>y)&&(l=y),(isNaN(m)||y>m)&&(m=y),c=AmCharts.getDecimals(D);var S=AmCharts.getDecimals(y),D=D+y,D=AmCharts.roundTo(D,Math.max(c,S));x++,c=D/x}}M.percents&&(M=M.percents[C],!isNaN(M))&&(isNaN(u)&&(u=M),g=M,(isNaN(p)||p>M)&&(p=M),(isNaN(f)||M>f)&&(f=M),A=AmCharts.getDecimals(v),y=AmCharts.getDecimals(M),v+=M,v=AmCharts.roundTo(v,Math.max(A,y)),T++,A=v/T)}}v={open:u,close:g,high:f,low:p,average:A,sum:v,count:T},t=AmCharts.formatValue(t,{open:n,close:d,high:m,low:l,average:c,sum:D,count:x},s,r,C+"\\.",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers),t=AmCharts.formatValue(t,v,s,this.pf,"percents\\."+C+"\\.")}}return t=AmCharts.cleanFromEmpty(t)},formatString:function(t,e,i){var s=e.graph;if(-1!=t.indexOf("[[category]]")){var a=e.serialDataItem.category;if(this.categoryAxis.parseDates){var h=this.balloonDateFormat,r=this.chartCursor;r&&(h=r.categoryBalloonDateFormat),-1!=t.indexOf("[[category]]")&&(h=AmCharts.formatDate(a,h,this),-1!=h.indexOf("fff")&&(h=AmCharts.formatMilliseconds(h,a)),a=h)}t=t.replace(/\[\[category\]\]/g,String(a))}return s=s.numberFormatter,s||(s=this.nf),a=e.graph.valueAxis,(h=a.duration)&&!isNaN(e.values.value)&&(a=AmCharts.formatDuration(e.values.value,h,"",a.durationUnits,a.maxInterval,s),t=t.replace(RegExp("\\[\\[value\\]\\]","g"),a)),a="value open low high close total".split(" "),h=this.pf,t=AmCharts.formatValue(t,e.percents,a,h,"percents\\."),t=AmCharts.formatValue(t,e.values,a,s,"",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers),t=AmCharts.formatValue(t,e.values,["percents"],h),-1!=t.indexOf("[[")&&(t=AmCharts.formatDataContextValue(t,e.dataContext)),t=AmCharts.AmSerialChart.base.formatString.call(this,t,e,i)},addChartScrollbar:function(t){AmCharts.callMethod("destroy",[this.chartScrollbar]),t&&(t.chart=this,this.listenTo(t,"zoomed",this.handleScrollbarZoom)),this.rotate?void 0===t.width&&(t.width=t.scrollbarHeight):void 0===t.height&&(t.height=t.scrollbarHeight),this.chartScrollbar=t},removeChartScrollbar:function(){AmCharts.callMethod("destroy",[this.chartScrollbar]),this.chartScrollbar=null},handleReleaseOutside:function(t){AmCharts.AmSerialChart.base.handleReleaseOutside.call(this,t),AmCharts.callMethod("handleReleaseOutside",[this.chartScrollbar])}}),AmCharts.Cuboid=AmCharts.Class({construct:function(t,e,i,s,a,h,r,o,n,d,l,m,c,u,g,p){this.set=t.set(),this.container=t,this.h=Math.round(i),this.w=Math.round(e),this.dx=s,this.dy=a,this.colors=h,this.alpha=r,this.bwidth=o,this.bcolor=n,this.balpha=d,this.dashLength=u,this.topRadius=p,this.pattern=g,(this.rotate=c)?0>e&&0===l&&(l=180):0>i&&270==l&&(l=90),this.gradientRotation=l,0===s&&0===a&&(this.cornerRadius=m),this.draw()},draw:function(){var t=this.set;t.clear();var e=this.container,i=this.w,s=this.h,a=this.dx,h=this.dy,r=this.colors,o=this.alpha,n=this.bwidth,d=this.bcolor,l=this.balpha,m=this.gradientRotation,c=this.cornerRadius,u=this.dashLength,g=this.pattern,p=this.topRadius,f=r,A=r;"object"==typeof r&&(f=r[0],A=r[r.length-1]);var C,D,x,v,T,b,M,y,S,N=o;g&&(o=0);var w,I,W,P,R=this.rotate;if(0<Math.abs(a)||0<Math.abs(h))if(isNaN(p))M=A,A=AmCharts.adjustLuminosity(f,-.2),A=AmCharts.adjustLuminosity(f,-.2),C=AmCharts.polygon(e,[0,a,i+a,i,0],[0,h,h,0,0],A,o,1,d,0,m),l>0&&(S=AmCharts.line(e,[0,a,i+a],[0,h,h],d,l,n,u)),D=AmCharts.polygon(e,[0,0,i,i,0],[0,s,s,0,0],A,o,1,d,0,m),D.translate(a,h),l>0&&(x=AmCharts.line(e,[a,a],[h,h+s],d,l,n,u)),v=AmCharts.polygon(e,[0,0,a,a,0],[0,s,s+h,h,0],A,o,1,d,0,m),T=AmCharts.polygon(e,[i,i,i+a,i+a,i],[0,s,s+h,h,0],A,o,1,d,0,m),l>0&&(b=AmCharts.line(e,[i,i+a,i+a,i],[0,h,s+h,s],d,l,n,u)),A=AmCharts.adjustLuminosity(M,.2),M=AmCharts.polygon(e,[0,a,i+a,i,0],[s,s+h,s+h,s,s],A,o,1,d,0,m),l>0&&(y=AmCharts.line(e,[0,a,i+a],[s,s+h,s+h],d,l,n,u));else{var F,O,L;R?(F=s/2,A=a/2,L=s/2,O=i+a/2,I=Math.abs(s/2),w=Math.abs(a/2)):(A=i/2,F=h/2,O=i/2,L=s+h/2+1,w=Math.abs(i/2),I=Math.abs(h/2)),W=w*p,P=I*p,w>.1&&w>.1&&(C=AmCharts.circle(e,w,f,o,n,d,l,!1,I),C.translate(A,F)),W>.1&&W>.1&&(M=AmCharts.circle(e,W,AmCharts.adjustLuminosity(f,.5),o,n,d,l,!1,P),M.translate(O,L))}for(o=N,1>Math.abs(s)&&(s=0),1>Math.abs(i)&&(i=0),!isNaN(p)&&(0<Math.abs(a)||0<Math.abs(h))?(r=[f],r={fill:r,stroke:d,"stroke-width":n,"stroke-opacity":l,"fill-opacity":o},R?(o="M0,0 L"+i+","+(s/2-s/2*p),n=" B",i>0&&(n=" A"),AmCharts.VML?(o+=n+Math.round(i-W)+","+Math.round(s/2-P)+","+Math.round(i+W)+","+Math.round(s/2+P)+","+i+",0,"+i+","+s,o=o+(" L0,"+s)+(n+Math.round(-w)+","+Math.round(s/2-I)+","+Math.round(w)+","+Math.round(s/2+I)+",0,"+s+",0,0")):(o+="A"+W+","+P+",0,0,0,"+i+","+(s-s/2*(1-p))+"L0,"+s,o+="A"+w+","+I+",0,0,1,0,0"),w=90):(n=i/2-i/2*p,o="M0,0 L"+n+","+s,AmCharts.VML?(o="M0,0 L"+n+","+s,n=" B",0>s&&(n=" A"),o+=n+Math.round(i/2-W)+","+Math.round(s-P)+","+Math.round(i/2+W)+","+Math.round(s+P)+",0,"+s+","+i+","+s,o+=" L"+i+",0",o+=n+Math.round(i/2+w)+","+Math.round(I)+","+Math.round(i/2-w)+","+Math.round(-I)+","+i+",0,0,0"):(o+="A"+W+","+P+",0,0,0,"+(i-i/2*(1-p))+","+s+"L"+i+",0",o+="A"+w+","+I+",0,0,1,0,0"),w=180),e=e.path(o).attr(r),e.gradient("linearGradient",[f,AmCharts.adjustLuminosity(f,-.3),AmCharts.adjustLuminosity(f,-.3),f],w),R?e.translate(a/2,0):e.translate(0,h/2)):e=0===s?AmCharts.line(e,[0,i],[0,0],d,l,n,u):0===i?AmCharts.line(e,[0,0],[0,s],d,l,n,u):c>0?AmCharts.rect(e,i,s,r,o,n,d,l,c,m,u):AmCharts.polygon(e,[0,0,i,i,0],[0,s,s,0,0],r,o,n,d,l,m,!1,u),i=isNaN(p)?0>s?[C,S,D,x,v,T,b,M,y,e]:[M,y,D,x,v,T,C,S,b,e]:R?i>0?[C,e,M]:[M,e,C]:0>s?[C,e,M]:[M,e,C],s=0;s<i.length;s++)(a=i[s])&&t.push(a);g&&e.pattern(g)},width:function(t){this.w=Math.round(t),this.draw()},height:function(t){this.h=Math.round(t),this.draw()},animateHeight:function(t,e){var i=this;i.easing=e,i.totalFrames=Math.round(1e3*t/AmCharts.updateRate),i.rh=i.h,i.frame=0,i.height(1),setTimeout(function(){i.updateHeight.call(i)},AmCharts.updateRate)},updateHeight:function(){var t=this;t.frame++;var e=t.totalFrames;t.frame<=e&&(e=t.easing(0,t.frame,1,t.rh-1,e),t.height(e),setTimeout(function(){t.updateHeight.call(t)},AmCharts.updateRate))},animateWidth:function(t,e){var i=this;i.easing=e,i.totalFrames=Math.round(1e3*t/AmCharts.updateRate),i.rw=i.w,i.frame=0,i.width(1),setTimeout(function(){i.updateWidth.call(i)},AmCharts.updateRate)},updateWidth:function(){var t=this;t.frame++;var e=t.totalFrames;t.frame<=e&&(e=t.easing(0,t.frame,1,t.rw-1,e),t.width(e),setTimeout(function(){t.updateWidth.call(t)},AmCharts.updateRate))}}),AmCharts.CategoryAxis=AmCharts.Class({inherits:AmCharts.AxisBase,construct:function(t){this.cname="CategoryAxis",AmCharts.CategoryAxis.base.construct.call(this,t),this.minPeriod="DD",this.equalSpacing=this.parseDates=!1,this.position="bottom",this.startOnAxis=!1,this.firstDayOfWeek=1,this.gridPosition="middle",this.markPeriodChange=this.boldPeriodBeginning=!0,this.safeDistance=30,this.centerLabelOnFullPeriod=!0,this.periods=[{period:"ss",count:1},{period:"ss",count:5},{period:"ss",count:10},{period:"ss",count:30},{period:"mm",count:1},{period:"mm",count:5},{period:"mm",count:10},{period:"mm",count:30},{period:"hh",count:1},{period:"hh",count:3},{period:"hh",count:6},{period:"hh",count:12},{period:"DD",count:1},{period:"DD",count:2},{period:"DD",count:3},{period:"DD",count:4},{period:"DD",count:5},{period:"WW",count:1},{period:"MM",count:1},{period:"MM",count:2},{period:"MM",count:3},{period:"MM",count:6},{period:"YYYY",count:1},{period:"YYYY",count:2},{period:"YYYY",count:5},{period:"YYYY",count:10},{period:"YYYY",count:50},{period:"YYYY",count:100}],this.dateFormats=[{period:"fff",format:"JJ:NN:SS"},{period:"ss",format:"JJ:NN:SS"},{period:"mm",format:"JJ:NN"},{period:"hh",format:"JJ:NN"},{period:"DD",format:"MMM DD"},{period:"WW",format:"MMM DD"},{period:"MM",format:"MMM"},{period:"YYYY",format:"YYYY"}],this.nextPeriod={},this.nextPeriod.fff="ss",this.nextPeriod.ss="mm",this.nextPeriod.mm="hh",this.nextPeriod.hh="DD",this.nextPeriod.DD="MM",this.nextPeriod.MM="YYYY",AmCharts.applyTheme(this,t,this.cname)},draw:function(){AmCharts.CategoryAxis.base.draw.call(this),this.generateDFObject();var t=this.chart.chartData;if(this.data=t,AmCharts.ifArray(t)){var e,i=this.chart,s=this.start,a=this.labelFrequency,h=0;e=this.end-s+1;var r,o=this.gridCountR,n=this.showFirstLabel,d=this.showLastLabel,l="",m=AmCharts.extractPeriod(this.minPeriod);r=AmCharts.getPeriodDuration(m.period,m.count);var c,u,g,p,f,A;c=this.rotate;var C,D=this.firstDayOfWeek,x=this.boldPeriodBeginning,t=AmCharts.resetDateToMin(new Date(t[t.length-1].time+1.05*r),this.minPeriod,1,D).getTime();this.endTime>t&&(this.endTime=t),A=this.minorGridEnabled;var v,T,t=this.gridAlpha;if(this.parseDates&&!this.equalSpacing){this.timeDifference=this.endTime-this.startTime,s=this.choosePeriod(0),a=s.period,c=s.count,u=AmCharts.getPeriodDuration(a,c),r>u&&(a=m.period,c=m.count,u=r),g=a,"WW"==g&&(g="DD"),this.stepWidth=this.getStepWidth(this.timeDifference);var o=Math.ceil(this.timeDifference/u)+5,b=l=AmCharts.resetDateToMin(new Date(this.startTime-u),a,c,D).getTime();g==a&&1==c&&this.centerLabelOnFullPeriod&&(f=u*this.stepWidth),this.cellWidth=r*this.stepWidth,e=Math.round(l/u),s=-1,e/2==Math.round(e/2)&&(s=-2,l-=u);var M=i.firstTime,y=0;if(A&&c>1&&(v=this.chooseMinorFrequency(c),T=AmCharts.getPeriodDuration(a,v)),0<this.gridCountR)for(e=s;o>=e;e++){if(m=M+u*(e+Math.floor((b-M)/u))-y,"DD"==a&&(m+=36e5),m=AmCharts.resetDateToMin(new Date(m),a,c,D).getTime(),"MM"==a&&(A=(m-l)/u,(m-l)/u>=1.5&&(m=m-(A-1)*u+AmCharts.getPeriodDuration("DD",3),m=AmCharts.resetDateToMin(new Date(m),a,1).getTime(),y+=u)),r=(m-this.startTime)*this.stepWidth,A=!1,this.nextPeriod[g]&&(A=this.checkPeriodChange(this.nextPeriod[g],1,m,l,g)),C=!1,A&&this.markPeriodChange?(A=this.dateFormatsObject[this.nextPeriod[g]],this.twoLineMode&&(A=this.dateFormatsObject[g]+"\n"+A,A=AmCharts.fixBrakes(A)),C=!0):A=this.dateFormatsObject[g],x||(C=!1),l=AmCharts.formatDate(new Date(m),A,i),(e==s&&!n||e==o&&!d)&&(l=" "),this.labelFunction&&(l=this.labelFunction(l,new Date(m),this,a,c,p).toString()),this.boldLabels&&(C=!0),p=new this.axisItemRenderer(this,r,l,!1,f,0,!1,C),this.pushAxisItem(p),p=l=m,!isNaN(v))for(r=1;c>r;r+=v)this.gridAlpha=this.minorGridAlpha,A=m+T*r,A=AmCharts.resetDateToMin(new Date(A),a,v,D).getTime(),A=new this.axisItemRenderer(this,(A-this.startTime)*this.stepWidth),this.pushAxisItem(A);this.gridAlpha=t}}else if(this.parseDates){if(this.parseDates&&this.equalSpacing){if(h=this.start,this.startTime=this.data[this.start].time,this.endTime=this.data[this.end].time,this.timeDifference=this.endTime-this.startTime,s=this.choosePeriod(0),a=s.period,c=s.count,u=AmCharts.getPeriodDuration(a,c),r>u&&(a=m.period,c=m.count,u=r),g=a,"WW"==g&&(g="DD"),this.stepWidth=this.getStepWidth(e),o=Math.ceil(this.timeDifference/u)+1,l=AmCharts.resetDateToMin(new Date(this.startTime-u),a,c,D).getTime(),this.cellWidth=this.getStepWidth(e),e=Math.round(l/u),s=-1,e/2==Math.round(e/2)&&(s=-2,l-=u),r=this.start,r/2==Math.round(r/2)&&r--,0>r&&(r=0),f=this.end+2,f>=this.data.length&&(f=this.data.length),T=!1,T=!n,this.previousPos=-1e3,20<this.labelRotation&&(this.safeDistance=5),u=r,this.data[r].time!=AmCharts.resetDateToMin(new Date(this.data[r].time),a,c,D).getTime())for(D=0,C=l,e=r;f>e;e++)m=this.data[e].time,this.checkPeriodChange(a,c,m,C)&&(D++,D>=2&&(u=e,e=f),C=m);if(A&&c>1&&(v=this.chooseMinorFrequency(c),AmCharts.getPeriodDuration(a,v)),0<this.gridCountR)for(e=r;f>e;e++)m=this.data[e].time,this.checkPeriodChange(a,c,m,l)&&e>=u?(r=this.getCoordinate(e-this.start),A=!1,this.nextPeriod[g]&&(A=this.checkPeriodChange(this.nextPeriod[g],1,m,l,g)),C=!1,A&&this.markPeriodChange?(A=this.dateFormatsObject[this.nextPeriod[g]],C=!0):A=this.dateFormatsObject[g],l=AmCharts.formatDate(new Date(m),A,i),(e==s&&!n||e==o&&!d)&&(l=" "),T?T=!1:(x||(C=!1),r-this.previousPos>this.safeDistance*Math.cos(this.labelRotation*Math.PI/180)&&(this.labelFunction&&(l=this.labelFunction(l,new Date(m),this,a,c,p)),this.boldLabels&&(C=!0),p=new this.axisItemRenderer(this,r,l,void 0,void 0,void 0,void 0,C),D=p.graphics(),this.pushAxisItem(p),p=D.getBBox().width,AmCharts.isModern||(p-=r),this.previousPos=r+p)),p=l=m):isNaN(v)||(this.checkPeriodChange(a,v,m,b)&&(this.gridAlpha=this.minorGridAlpha,r=this.getCoordinate(e-this.start),A=new this.axisItemRenderer(this,r),this.pushAxisItem(A),b=m),this.gridAlpha=t)}}else if(this.cellWidth=this.getStepWidth(e),o>e&&(o=e),h+=this.start,this.stepWidth=this.getStepWidth(e),o>0)for(x=Math.floor(e/o),v=this.chooseMinorFrequency(x),r=h,r/2==Math.round(r/2)&&r--,0>r&&(r=0),o=0,this.end-r+1>=this.autoRotateCount&&(this.labelRotation=this.autoRotateAngle),e=r;e<=this.end+2;e++){if(p=!1,e>=0&&e<this.data.length?(g=this.data[e],l=g.category,p=g.forceShow):l="",A&&!isNaN(v)){if(e/v!=Math.round(e/v)&&!p)continue;e/x==Math.round(e/x)||p||(this.gridAlpha=this.minorGridAlpha,l=void 0)}else if(e/x!=Math.round(e/x)&&!p)continue;r=this.getCoordinate(e-h),p=0,"start"==this.gridPosition&&(r-=this.cellWidth/2,p=this.cellWidth/2),D=!0,tickShift=p,"start"==this.tickPosition&&(tickShift=0,D=!1,p=0),(e==s&&!n||e==this.end&&!d)&&(l=void 0),Math.round(o/a)!=o/a&&(l=void 0),o++,b=this.cellWidth,c&&(b=NaN),this.labelFunction&&g&&(l=this.labelFunction(l,g,this)),l=AmCharts.fixBrakes(l),C=!1,this.boldLabels&&(C=!0),e>this.end&&"start"==this.tickPosition&&(l=" "),p=new this.axisItemRenderer(this,r,l,D,b,p,void 0,C,tickShift,!1,g.labelColor),p.serialDataItem=g,this.pushAxisItem(p),this.gridAlpha=t}for(e=0;e<this.data.length;e++)(n=this.data[e])&&(d=this.parseDates&&!this.equalSpacing?Math.round((n.time-this.startTime)*this.stepWidth+this.cellWidth/2):this.getCoordinate(e-h),n.x[this.id]=d);for(n=this.guides.length,e=0;n>e;e++)d=this.guides[e],x=x=x=t=s=NaN,v=d.above,d.toCategory&&(x=i.getCategoryIndexByValue(d.toCategory),isNaN(x)||(s=this.getCoordinate(x-h),d.expand&&(s+=this.cellWidth/2),p=new this.axisItemRenderer(this,s,"",!0,NaN,NaN,d),this.pushAxisItem(p,v))),d.category&&(x=i.getCategoryIndexByValue(d.category),isNaN(x)||(t=this.getCoordinate(x-h),d.expand&&(t-=this.cellWidth/2),x=(s-t)/2,p=new this.axisItemRenderer(this,t,d.label,!0,NaN,x,d),this.pushAxisItem(p,v))),d.toDate&&(d.toDate instanceof Date||(d.toDate=AmCharts.stringToDate(d.toDate,i.dataDateFormat)),this.equalSpacing?(x=i.getClosestIndex(this.data,"time",d.toDate.getTime(),!1,0,this.data.length-1),isNaN(x)||(s=this.getCoordinate(x-h))):s=(d.toDate.getTime()-this.startTime)*this.stepWidth,p=new this.axisItemRenderer(this,s,"",!0,NaN,NaN,d),this.pushAxisItem(p,v)),d.date&&(d.date instanceof Date||(d.date=AmCharts.stringToDate(d.date,i.dataDateFormat)),this.equalSpacing?(x=i.getClosestIndex(this.data,"time",d.date.getTime(),!1,0,this.data.length-1),isNaN(x)||(t=this.getCoordinate(x-h))):t=(d.date.getTime()-this.startTime)*this.stepWidth,x=(s-t)/2,p="H"==this.orientation?new this.axisItemRenderer(this,t,d.label,!1,2*x,NaN,d):new this.axisItemRenderer(this,t,d.label,!1,NaN,x,d),this.pushAxisItem(p,v)),(s>0||t>0)&&(s<this.width||t<this.width)&&(s=new this.guideFillRenderer(this,t,s,d),t=s.graphics(),this.pushAxisItem(s,v),d.graphics=t,t.index=e,d.balloonText&&this.addEventListeners(t,d))}this.axisCreated=!0,i=this.x,h=this.y,this.set.translate(i,h),this.labelsSet.translate(i,h),this.positionTitle(),(i=this.axisLine.set)&&i.toFront(),i=this.getBBox().height,2<i-this.previousHeight&&this.autoWrap&&!this.parseDates&&(this.axisCreated=this.chart.marginsUpdated=!1),this.previousHeight=i},chooseMinorFrequency:function(t){for(var e=10;e>0;e--)if(t/e==Math.round(t/e))return t/e},choosePeriod:function(t){var e=AmCharts.getPeriodDuration(this.periods[t].period,this.periods[t].count),i=Math.ceil(this.timeDifference/e),s=this.periods;return this.timeDifference<e&&t>0?s[t-1]:i<=this.gridCountR?s[t]:t+1<s.length?this.choosePeriod(t+1):s[t]},getStepWidth:function(t){var e;return this.startOnAxis?(e=this.axisWidth/(t-1),1==t&&(e=this.axisWidth)):e=this.axisWidth/t,e},getCoordinate:function(t){return t*=this.stepWidth,this.startOnAxis||(t+=this.stepWidth/2),Math.round(t)},timeZoom:function(t,e){this.startTime=t,this.endTime=e},minDuration:function(){var t=AmCharts.extractPeriod(this.minPeriod);return AmCharts.getPeriodDuration(t.period,t.count)},checkPeriodChange:function(t,e,i,s,a){i=new Date(i);var h=new Date(s),r=this.firstDayOfWeek;return s=e,"DD"==t&&(e=1),i=AmCharts.resetDateToMin(i,t,e,r).getTime(),e=AmCharts.resetDateToMin(h,t,e,r).getTime(),"DD"==t&&"hh"!=a&&i-e<=AmCharts.getPeriodDuration(t,s)?!1:i!=e?!0:!1},generateDFObject:function(){this.dateFormatsObject={};var t;for(t=0;t<this.dateFormats.length;t++){var e=this.dateFormats[t];this.dateFormatsObject[e.period]=e.format}},xToIndex:function(t){var e=this.data,i=this.chart,s=i.rotate,a=this.stepWidth;this.parseDates&&!this.equalSpacing?(t=this.startTime+Math.round(t/a)-this.minDuration()/2,i=i.getClosestIndex(e,"time",t,!1,this.start,this.end+1)):(this.startOnAxis||(t-=a/2),i=this.start+Math.round(t/a));var h,i=AmCharts.fitToBounds(i,0,e.length-1);return e[i]&&(h=e[i].x[this.id]),s?h>this.height+1&&i--:h>this.width+1&&i--,0>h&&i++,i=AmCharts.fitToBounds(i,0,e.length-1)},dateToCoordinate:function(t){return this.parseDates&&!this.equalSpacing?(t.getTime()-this.startTime)*this.stepWidth:this.parseDates&&this.equalSpacing?(t=this.chart.getClosestIndex(this.data,"time",t.getTime(),!1,0,this.data.length-1),this.getCoordinate(t-this.start)):NaN},categoryToCoordinate:function(t){return this.chart?(t=this.chart.getCategoryIndexByValue(t),this.getCoordinate(t-this.start)):NaN},coordinateToDate:function(t){return this.equalSpacing?(t=this.xToIndex(t),new Date(this.data[t].time)):new Date(this.startTime+t/this.stepWidth)}});